<div th:fragment="nav">

    <div sec:authorize="isAuthenticated()">
        <form id="logoutForm" method="POST" th:action="@{/logout}">
            <input type="hidden" th:if="${_csrf != null}" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        </form>

        <!-- Logged-in user navigation -->
        <nav>
            <div class="max-w-4xl mx-auto px-4 sm:px-4 lg:px-4">
                <div class="flex justify-between h-16">
                    <div class="flex px-2 lg:px-0">
                        <div class="flex-shrink-0 flex items-center">
                            <a th:href="@{/projects}" class="font-bold cursor-pointer">
                                <span th:text="#{company.name}"></span>
                            </a>
                        </div>
                    </div>
                    <div class="ml-4 flex items-center">
                        <div class="ml-4 relative flex-shrink-0 flex flex-row" x-data="{ open: false }">
                            <a href="/hey"
                                class="relative rounded-full p-1 text-gray-400 hover:text-gray-500 focus:outline-2 focus:outline-offset-2 focus:outline-indigo-600">
                                <span class="absolute -inset-1.5"></span>
                                <span class="sr-only">View notifications</span>
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
                                    data-slot="icon" aria-hidden="true" class="size-6">
                                    <path
                                        d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"
                                        stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                            </a>
                            <button
                                class="ml-2 flex text-sm border-2 border-transparent rounded-full focus:outline-none focus:border-gray-300 transition duration-150 ease-in-out cursor-pointer"
                                @click="open = !open">
                                <img class="h-8 w-8 rounded-full"
                                    th:src="@{'https://ui-avatars.com/api/?length=1&name=' + ${#authentication.name} + '&background=random&color=random'}"
                                    th:alt="${#authentication.name}" th:title="${#authentication.name}">
                            </button>
                            <div class="relative flex-shrink-0" x-show="open" @click.away="open = false" x-transition>
                                <div
                                    class="origin-top-right absolute right-0 mt-8 w-48 rounded-md shadow-lg z-50">
                                    <div class="py-1 rounded-md bg-white shadow-xs">
                                        <!-- <a th:href="@{/profile}" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100">My profile</a> -->
                                        <a onclick="document.forms['logoutForm'].submit()"
                                            class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 cursor-pointer">Sign
                                            out</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <div sec:authorize="isAnonymous()">
        <!-- Guest user navigation -->
        <nav>
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex">
                        <div class="flex-shrink-0 flex items-center">
                            <a th:href="@{/projects}" class="font-bold cursor-pointer">
                                <span th:text="#{company.name}"></span>
                            </a>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <!-- <div class="flex-shrink-0">
                                <a href="mailto:admin@admin.com" class="relative cursor-pointer inline-flex items-center px-4 py-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-500">
                                    <svg class="h-5 w-5 mr-1" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 22a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM10.59 8.59a1 1 0 1 1-1.42-1.42 4 4 0 1 1 5.66 5.66l-2.12 2.12a1 1 0 1 1-1.42-1.42l2.12-2.12A2 2 0 0 0 10.6 8.6zM12 18a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                                    </svg>
                                    <span>Help</span>
                                </a>
                            </div> -->
                    </div>
                </div>
            </div>
        </nav>
    </div>
</div>

<div sec:authorize="isAuthenticated()">
    Authenticated
</div>
<div sec:authorize="isAnonymous()">
    Please log in.
</div>
</div>